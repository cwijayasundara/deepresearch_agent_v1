# Project Configuration

> Generated by claude-code-forge for python-fastapi

## Request Routing (CRITICAL)

Before writing any code, classify the user's request:

| Pattern | Category | Action |
|---------|----------|--------|
| "Build me X", "Create a", "Add feature X", "New app" | **Pipeline** | Invoke `/build` — do NOT explore or plan first |
| "Just do it", "Quick change", "Skip the spec" | **Quick Build** | Invoke `/just-do-it` — TDD without spec ceremony |
| "Continue", "Resume", "What's next" | **Resume** | Read `specs/pipeline_status.md`, resume from next incomplete phase |
| Everything else (bug fixes, refactoring, questions) | **Toolbox** | Handle directly; slash commands available |

**Never skip the spec-writer for "build" or "add feature" requests.**

## Architecture: 6-Layer Model

```
Types(0) -> Config(1) -> Repo(2) -> Service(3) -> Runtime(4) -> UI(5)
```

Code may only depend **forward** through layers. Backward imports are forbidden and enforced by `.claude/linters/layer_deps.py`.

| Layer | Path | May Import From | Never Import From |
|-------|------|-----------------|-------------------|
| Types | `src/types/` | (none) | All others |
| Config | `src/config/` | Types | Repo, Service, Runtime, UI |
| Repo | `src/repo/` | Types, Config | Service, Runtime, UI |
| Service | `src/service/` | Types, Config, Repo | Runtime, UI |
| Runtime | `src/runtime/` | Types, Config, Repo, Service | UI |
| UI | `src/ui/` | All layers | (none) |

## TDD Enforcement (Iron Law)

Every acceptance criterion follows the TDD cycle:

1. **RED** — Write a failing test that asserts the expected behavior
2. **GREEN** — Write the minimum production code to pass
3. **REFACTOR** — Clean up without changing behavior

Never write production code without a failing test first.

## Quality Gates

- **Linters**: `python3 .claude/linters/lint_all.py` (layer deps + file size)
- **Tests**: `pytest tests/ --cov=src --cov-fail-under=80`
- **File limits**: 300 lines per file, 50 lines per function

## Conventions

- **Files**: `snake_case.py` | **Classes**: `PascalCase` | **Constants**: `UPPER_SNAKE_CASE`
- **Logging**: `logging.getLogger(__name__)` — never `print()`
- **Error handling**: catch specific exceptions in Repo layer, log with context
- **Type hints**: all function signatures, no `Any`
- **Imports**: stdlib -> third-party -> project (in layer order)
- **Git**: feature branches `feature/<story-id>-<brief-name>`, one commit per story
